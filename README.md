# 采购清单管理系统 - 多用户协作版 (Netlify部署)

## 功能特性

### 🚀 核心功能
- **多用户实时协作** - 支持多个用户同时编辑采购清单
- **本地存储同步** - 使用localStorage实现跨标签页数据同步
- **采购周期管理** - 每两周自动更新采购周期，保存历史记录
- **Excel导入导出** - 支持Excel文件的导入和导出
- **审核工作流** - 完整的采购审核流程
- **双语界面** - 中英文双语界面
- **过往表格管理** - 自动保存和查看历史表格

### 📊 数据字段
- 商品名称 | Product Name
- 数量 | Quantity
- 单价 | Unit Price
- **总价 | Total Price** (自动计算)
- 商品链接 | Product Link
- 优先级 | Priority
- 备注 | Notes
- 添加人 | Added By
- 添加时间 | Added At

### 🔄 数据同步功能
- **localStorage同步** - 跨标签页实时数据同步
- **用户状态同步** - 在线用户列表实时更新
- **数据变更同步** - 添加、删除、修改操作实时同步
- **审核状态同步** - 审核操作实时同步到所有用户
- **表格保存** - 自动保存过往表格

## 部署说明

### Netlify部署
1. 将代码推送到GitHub仓库
2. 在Netlify中连接GitHub仓库
3. 设置构建命令：无（静态网站）
4. 设置发布目录：`/`（根目录）
5. 部署完成

### 本地开发
```bash
# 使用Python简单服务器
python -m http.server 8000

# 或使用Node.js
npx http-server

# 或使用Live Server (VS Code扩展)
```

## 使用说明

### 用户登录
1. 输入用户名和邮箱
2. 点击"加入协作"
3. 系统会自动启用localStorage同步

### 添加商品
1. 填写商品信息（名称、数量、单价等）
2. 总价会自动计算
3. 点击"添加商品"
4. 商品会实时同步到所有标签页

### 实时协作
- 所有用户的操作都会实时同步
- 可以看到其他在线用户
- 支持多用户同时编辑
- 编辑历史会记录所有操作

### 表格管理
- **保存表格** - 点击"保存当前表格"保存当前列表
- **查看表格** - 点击"查看保存的表格"查看历史表格
- **自动保存** - 系统会自动保存重要的表格数据

### 采购周期管理
- 每两周自动更新采购周期
- 历史记录自动保存
- 可以查看历史采购列表
- 支持强制更新周期

### Excel功能
- 生成Excel采购清单
- 导入Excel文件进行审核
- 导出审核通过的清单
- 优化的表格设计和格式

## 技术架构

### 前端
- HTML5 + CSS3 + JavaScript
- localStorage API
- SheetJS (Excel处理)
- 响应式设计

### 数据存储
- localStorage本地存储
- 跨标签页数据同步
- 自动数据备份
- 历史记录管理

### 数据同步
- localStorage事件监听
- 跨标签页通信
- 实时数据更新
- 用户状态管理

## 文件结构

```
├── index.html          # 主应用文件
├── README.md           # 说明文档
├── package.json        # 项目配置
└── .gitignore          # Git忽略文件
```

## 功能特色

### 📊 过往表格管理
- **自动保存** - 重要表格自动保存到localStorage
- **历史查看** - 可以查看所有保存的表格
- **详细信息** - 显示表格创建时间、创建人、商品数量等
- **删除管理** - 可以删除不需要的表格

### 🎨 Excel优化
- **专业格式** - 优化的表格样式和格式
- **自动列宽** - 根据内容自动调整列宽
- **颜色主题** - 不同用途使用不同颜色主题
- **数据验证** - 确保数据格式正确

### 🔄 实时同步
- **跨标签页** - 同一浏览器的不同标签页实时同步
- **用户状态** - 在线用户状态实时更新
- **操作历史** - 记录所有用户操作
- **数据一致性** - 确保所有用户看到相同数据

## 故障排除

### 数据同步问题
1. 检查浏览器是否支持localStorage
2. 确认没有禁用JavaScript
3. 检查浏览器控制台错误信息
4. 尝试刷新页面重新加载

### Excel导出问题
1. 确保浏览器支持文件下载
2. 检查SheetJS库是否正确加载
3. 确认数据格式正确

### 表格保存问题
1. 检查localStorage空间是否充足
2. 确认浏览器支持localStorage
3. 尝试清除浏览器缓存

## 更新日志

### v2.0.0 (Netlify版本)
- 移除WebSocket依赖，使用localStorage同步
- 添加过往表格管理功能
- 优化Excel表格设计
- 支持Netlify静态部署
- 改进用户界面和用户体验

### v1.0.0
- 初始版本发布
- 实现多用户实时协作
- 添加Excel导入导出
- 实现采购周期管理