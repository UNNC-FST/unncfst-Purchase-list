# 采购清单管理系统 - 多用户实时协作版

## 功能特性

### 🚀 核心功能
- **多用户实时协作** - 支持多个用户同时编辑采购清单
- **实时数据同步** - 使用WebSocket技术实现跨用户电脑的实时数据同步
- **采购周期管理** - 每两周自动更新采购周期，保存历史记录
- **Excel导入导出** - 支持Excel文件的导入和导出
- **审核工作流** - 完整的采购审核流程
- **双语界面** - 中英文双语界面

### 📊 数据字段
- 商品名称 | Product Name
- 数量 | Quantity
- 单价 | Unit Price
- **总价 | Total Price** (自动计算)
- 商品链接 | Product Link
- 优先级 | Priority
- 备注 | Notes
- 添加人 | Added By
- 添加时间 | Added At

### 🔄 实时同步功能
- **WebSocket连接** - 真正的跨用户电脑实时同步
- **用户状态同步** - 在线用户列表实时更新
- **数据变更同步** - 添加、删除、修改操作实时同步
- **审核状态同步** - 审核操作实时同步到所有用户
- **自动重连** - 网络断开时自动重连

## 安装和运行

### 1. 安装依赖
```bash
npm install
```

### 2. 启动服务器
```bash
npm start
```

### 3. 访问应用
打开浏览器访问：`http://localhost:3000`

## 使用说明

### 用户登录
1. 输入用户名和邮箱
2. 点击"加入协作"
3. 系统会自动连接到WebSocket服务器

### 添加商品
1. 填写商品信息（名称、数量、单价等）
2. 总价会自动计算
3. 点击"添加商品"
4. 商品会实时同步到所有在线用户

### 实时协作
- 所有用户的操作都会实时同步
- 可以看到其他在线用户
- 支持多用户同时编辑
- 编辑历史会记录所有操作

### 采购周期管理
- 每两周自动更新采购周期
- 历史记录自动保存
- 可以查看历史采购列表
- 支持强制更新周期

### Excel功能
- 生成Excel采购清单
- 导入Excel文件进行审核
- 导出审核通过的清单

## 技术架构

### 前端
- HTML5 + CSS3 + JavaScript
- WebSocket API
- SheetJS (Excel处理)
- localStorage (本地存储)

### 后端
- Node.js
- Express.js (Web服务器)
- ws (WebSocket服务器)

### 数据同步
- WebSocket实时通信
- 服务器端数据存储
- 客户端本地缓存
- 自动重连机制

## 部署说明

### 本地开发
```bash
npm run dev
```

### 生产部署
```bash
npm start
```

### 环境变量
- `PORT` - 服务器端口 (默认: 3000)

## 故障排除

### WebSocket连接问题
1. 检查服务器是否正常运行
2. 检查防火墙设置
3. 确认端口3000未被占用

### 数据同步问题
1. 检查网络连接
2. 查看浏览器控制台错误信息
3. 尝试刷新页面重新连接

## 更新日志

### v1.0.0
- 初始版本发布
- 实现多用户实时协作
- 添加WebSocket实时同步
- 支持Excel导入导出
- 实现采购周期管理